services:
  codex-viz:
    image: ${IMAGE:-codex-viz:local}
    build:
      context: .
      dockerfile: Dockerfile
    container_name: codex-viz
    ports:
      - "3000:3000"
    environment:
      CODEX_SESSIONS_DIR: /codex-sessions
      CODEX_VIZ_CACHE_DIR: /codex-viz-cache
    volumes:
      - ${HOME}/.codex/sessions:/codex-sessions:ro
      - ${HOME}/.codex-viz/cache:/codex-viz-cache
    restart: unless-stopped
